{"version":3,"file":"soundjs.cjs.js","sources":["../../core/src/events/Event.js","../../core/src/events/EventDispatcher.js","../src/AbstractAudioWrapper.js","../src/Sample.js","../src/Group.js","../src/Sound.js","../src/utils/Declicker.js","../src/Playback.js","../src/effects/Effect.js","../src/effects/LowPassFilter.js","../src/effects/HighPassFilter.js","../src/effects/BiquadFilter.js","../src/main.js"],"sourcesContent":["/**\n * @license Event\n * Visit http://createjs.com/ for documentation, updates and examples.\n *\n * Copyright (c) 2017 gskinner.com, inc.\n *\n * Permission is hereby granted, free of charge, to any person\n * obtaining a copy of this software and associated documentation\n * files (the \"Software\"), to deal in the Software without\n * restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following\n * conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n * OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/**\n * Contains properties and methods shared by all events for use with {@link core.EventDispatcher}.\n * Note that Event objects are often reused, so you should never\n * rely on an event object's state outside of the call stack it was received in.\n *\n * @memberof core\n * @example\n * const evt = new Event(\"myEvent\");\n * const dispatcher = new EventDispatcher();\n * dispatcher.on(\"myEvent\", event => console.log(event.type));\n * dispatcher.dispatchEvent(evt); // logs \"myEvent\"\n *\n * @param {string} type The event type.\n * @param {boolean} [bubbles=false] Indicates whether the event will bubble through the display list.\n * @param {boolean} [cancelable=false] Indicates whether the default behaviour of this event can be cancelled.\n */\nclass Event {\n\n\tconstructor (type, bubbles = false, cancelable = false) {\n\t\t/**\n\t\t * The type of event.\n\t\t * @type string\n\t\t */\n\t\tthis.type = type;\n\n\t\t/**\n\t\t * The object that generated an event.\n\t\t *\n\t\t * @type Object\n\t\t * @default null\n\t\t * @readonly\n\t\t */\n\t\tthis.target = null;\n\n\t\t/**\n\t\t * The current target that a bubbling event is being dispatched from. For non-bubbling events, this will\n\t\t * always be the same as target. For example, if childObj.parent = parentObj, and a bubbling event\n\t\t * is generated from childObj, then a listener on parentObj would receive the event with\n\t\t * target=childObj (the original target) and currentTarget=parentObj (where the listener was added).\n\t\t *\n\t\t * @type Object\n\t\t * @default null\n\t\t * @readonly\n\t\t */\n\t\tthis.currentTarget = null;\n\n\t\t/**\n\t\t * For bubbling events, this indicates the current event phase:\n\t\t * <OL>\n\t\t * \t<LI> capture phase: starting from the top parent to the target</LI>\n\t\t * \t<LI> at target phase: currently being dispatched from the target</LI>\n\t\t * \t<LI> bubbling phase: from the target to the top parent</LI>\n\t\t * </OL>\n\t\t *\n\t\t * @type number\n\t\t * @default 0\n\t\t * @readonly\n\t\t */\n\t\tthis.eventPhase = 0;\n\n\t\t/**\n\t\t * Indicates whether the event will bubble through the display list.\n\t\t *\n\t\t * @type boolean\n\t\t * @readonly\n\t\t */\n\t\tthis.bubbles = bubbles;\n\n\t\t/**\n\t\t * Indicates whether the default behaviour of this event can be cancelled via {@link core.Event#preventDefault}.\n\t\t *\n\t\t * @type boolean\n\t\t * @readonly\n\t\t */\n\t\tthis.cancelable = cancelable;\n\n\t\t/**\n\t\t * The epoch time at which this event was created.\n\t\t *\n\t\t * @type number\n\t\t * @readonly\n\t\t */\n\t\tthis.timeStamp = new Date().getTime();\n\n\t\t/**\n\t\t * Indicates if {@link core.Event#preventDefault} has been called on this event.\n\t\t *\n\t\t * @type boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t */\n\t\tthis.defaultPrevented = false;\n\n\t\t/**\n\t\t * Indicates if {@link core.Event#stopPropagation} or {@link core.Event#stopImmediatePropagation} has been called on this event.\n\t\t *\n\t\t * @type boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t */\n\t\tthis.propagationStopped = false;\n\n\t\t/**\n\t\t * Indicates if {@link core.Event#stopImmediatePropagation} has been called on this event.\n\t\t *\n\t\t * @type boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t */\n\t\tthis.immediatePropagationStopped = false;\n\n\t\t/**\n\t\t * Indicates if {@link core.Event#remove} has been called on this event.\n\t\t *\n\t\t * @type boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t */\n\t\tthis.removed = false;\n\t}\n\n\t/**\n\t * Sets {@link core.Event#defaultPrevented} to true if the event is cancelable.\n\t * Mirrors the DOM level 2 event standard. In general, cancelable events that have `preventDefault()` called will\n\t * cancel the default behaviour associated with the event.\n\t * @return {core.Event} this, chainable\n\t */\n\tpreventDefault () {\n\t\tthis.defaultPrevented = this.cancelable;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Sets {@link core.Event#propagationStopped} to true.\n\t * Mirrors the DOM event standard.\n\t * @return {core.Event} this, chainable\n\t */\n\tstopPropagation () {\n\t\tthis.propagationStopped = true;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Sets {@link core.Event#propagationStopped} and {@link core.Event#immediatePropagationStopped} to true.\n\t * Mirrors the DOM event standard.\n\t * @return {core.Event} this, chainable\n\t */\n\tstopImmediatePropagation () {\n\t\tthis.immediatePropagationStopped = this.propagationStopped = true;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Causes the active listener to be removed via removeEventListener();\n\t *\n\t * @example\n\t * myBtn.addEventListener(\"click\", event => {\n\t *   event.remove(); // removes this listener.\n\t * });\n\t *\n\t * @return {core.Event} this, chainable\n\t */\n\tremove () {\n\t\tthis.removed = true;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns a clone of the Event instance.\n\t *\n\t * @return {core.Event} a clone of the Event instance.\n\t */\n\tclone () {\n\t\tconst event = new Event(this.type, this.bubbles, this.cancelable);\n\t\tfor (let n in this) {\n\t\t\tif (this.hasOwnProperty(n)) {\n\t\t\t\tevent[n] = this[n];\n\t\t\t}\n\t\t}\n\t\treturn event;\n\t}\n\n\t/**\n\t * Provides a return {core.Event} this, chainable shortcut method for setting a number of properties on the instance.\n\t *\n\t * @param {Object} props A generic object containing properties to copy to the instance.\n\t * @return {core.Event} this, chainable\n\t */\n\tset (props) {\n\t\tfor (let n in props) { this[n] = props[n]; }\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns a string representation of this object.\n\t *\n\t * @return {string} A string representation of the instance.\n\t */\n\ttoString () {\n\t\treturn `[${this.constructor.name} (type=${this.type})]`;\n\t}\n\n}\n\nexport default Event;\n","/**\n * @license EventDispatcher\n * Visit http://createjs.com/ for documentation, updates and examples.\n *\n * Copyright (c) 2017 gskinner.com, inc.\n *\n * Permission is hereby granted, free of charge, to any person\n * obtaining a copy of this software and associated documentation\n * files (the \"Software\"), to deal in the Software without\n * restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following\n * conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n * OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport Event from \"./Event\";\n\n/**\n * EventDispatcher provides methods for managing queues of event listeners and dispatching events.\n *\n * You can either extend EventDispatcher or mix its methods into an existing prototype or instance by using the\n * EventDispatcher {@link core.EventDispatcher.initialize} method.\n *\n * Together with the CreateJS Event class, EventDispatcher provides an extended event model that is based on the\n * DOM Level 2 event model, including addEventListener, removeEventListener, and dispatchEvent. It supports\n * bubbling / capture, preventDefault, stopPropagation, stopImmediatePropagation, and handleEvent.\n *\n * EventDispatcher also exposes a {@link core.EventDispatcher#on} method, which makes it easier\n * to create scoped listeners, listeners that only run once, and listeners with associated arbitrary data. The\n * {@link core.EventDispatcher#off} method is merely an alias to {@link core.EventDispatcher#removeEventListener}.\n *\n * Another addition to the DOM Level 2 model is the {@link core.EventDispatcher#removeAllEventListeners}\n * method, which can be used to listeners for all events, or listeners for a specific event. The Event object also\n * includes a {@link core.Event#remove} method which removes the active listener.\n *\n * @memberof core\n * @example\n * // add EventDispatcher capabilities to the \"MyClass\" class.\n * EventDispatcher.initialize(MyClass.prototype);\n *\n * // Add an event.\n * instance.addEventListener(\"eventName\", event => console.log(event.target + \" was clicked.\"));\n *\n * // scope (\"this\") can be be a challenge with events.\n * // using the {@link core.EventDispatcher#on} method to subscribe to events simplifies this.\n * instance.addEventListener(\"click\", event => console.log(instance === this)); // false, scope is ambiguous.\n * instance.on(\"click\", event => console.log(instance === this)); // true, `on` uses dispatcher scope by default.\n */\nclass EventDispatcher {\n\n\t/**\n\t * Static initializer to mix EventDispatcher methods into a target object or prototype.\n\t *\n\t * @static\n\t * @example\n\t * EventDispatcher.initialize(MyClass.prototype); // add to the prototype of the class\n\t * EventDispatcher.initialize(myInstance); // add to a specific instance\n\t *\n\t * @param {Object} target The target object to inject EventDispatcher methods into.\n\t */\n\tstatic initialize (target) {\n\t\tconst p = EventDispatcher.prototype;\n\t\ttarget.addEventListener = p.addEventListener;\n\t\ttarget.on = p.on;\n\t\ttarget.removeEventListener = target.off = p.removeEventListener;\n\t\ttarget.removeAllEventListeners = p.removeAllEventListeners;\n\t\ttarget.hasEventListener = p.hasEventListener;\n\t\ttarget.dispatchEvent = p.dispatchEvent;\n\t\ttarget._dispatchEvent = p._dispatchEvent;\n\t\ttarget.willTrigger = p.willTrigger;\n\t}\n\n\tconstructor () {\n\t\t/**\n\t\t * @private\n\t\t * @default null\n\t\t * @type Object\n\t\t */\n\t\tthis._listeners = null;\n\n\t\t/**\n\t\t * @private\n\t\t * @default null\n\t\t * @type Object\n\t\t */\n\t\tthis._captureListeners = null;\n\t}\n\n\t/**\n\t * Adds the specified event listener. Note that adding multiple listeners to the same function will result in\n\t * multiple callbacks getting fired.\n\t *\n\t * @example\n\t * displayObject.addEventListener(\"click\", event => console.log('clicked', event));\n\t *\n\t * @param {string} type The string type of the event.\n\t * @param {Function|Object} listener An object with a handleEvent method, or a function that will be called when the event is dispatched.\n\t * @param {boolean} [useCapture=false] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t * @return {Function|Object} Returns the listener for chaining or assignment.\n\t */\n\taddEventListener (type, listener, useCapture = false) {\n\t\tlet listeners;\n\t\tif (useCapture) {\n\t\t\tlisteners = this._captureListeners = this._captureListeners || {};\n\t\t} else {\n\t\t\tlisteners = this._listeners = this._listeners || {};\n\t\t}\n\t\tlet arr = listeners[type];\n\t\tif (arr) {\n\t\t\tthis.removeEventListener(type, listener, useCapture);\n\t\t\tarr = listeners[type]; // remove may have deleted the array\n\t\t}\n\t\tif (arr) { arr.push(listener);  }\n\t\telse { listeners[type] = [listener]; }\n\t\treturn listener;\n\t}\n\n\t/**\n\t * A shortcut method for using addEventListener that makes it easier to specify an execution scope, have a listener\n\t * only run once, associate arbitrary data with the listener, and remove the listener.\n\t *\n\t * This method works by creating an anonymous wrapper function and subscribing it with `addEventListener`.\n\t * The wrapper function is returned for use with `removeEventListener` (or `off`).\n\t *\n\t * To remove a listener added with `on`, you must pass in the returned wrapper function as the listener, or use\n\t * {@link core.Event#remove}. Likewise, each time you call `on` a NEW wrapper function is subscribed, so multiple calls\n\t * to `on` with the same params will create multiple listeners.\n\t *\n\t * @example\n\t * const listener = myBtn.on(\"click\", handleClick, null, false, { count: 3 });\n\t * function handleClick (evt, data) {\n\t *   data.count -= 1;\n\t *   console.log(this == myBtn); // true - scope defaults to the dispatcher\n\t *   if (data.count == 0) {\n\t *     alert(\"clicked 3 times!\");\n\t *     myBtn.off(\"click\", listener);\n\t *     // alternately: evt.remove();\n\t *   }\n\t * }\n\t *\n\t * @param {string} type The string type of the event.\n\t * @param {Function|Object} listener An object with a handleEvent method, or a function that will be called when the event is dispatched.\n\t * @param {Object} [scope=null] The scope to execute the listener in. Defaults to the dispatcher/currentTarget for function listeners, and to the listener itself for object listeners (ie. using handleEvent).\n\t * @param {boolean} [once=false] If true, the listener will remove itself after the first time it is triggered.\n\t * @param {*} [data={}] Arbitrary data that will be included as the second parameter when the listener is called.\n\t * @param {boolean} [useCapture=false] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t * @return {Function} Returns the anonymous function that was created and assigned as the listener. This is needed to remove the listener later using .removeEventListener.\n\t */\n\ton (type, listener, scope = null, once = false, data = {}, useCapture = false) {\n\t\tif (listener.handleEvent) {\n\t\t\tscope = scope || listener;\n\t\t\tlistener = listener.handleEvent;\n\t\t}\n\t\tscope = scope || this;\n\t\treturn this.addEventListener(type, evt => {\n\t\t\tlistener.call(scope, evt, data);\n\t\t\tonce && evt.remove();\n\t\t}, useCapture);\n\t}\n\n\t/**\n\t * Removes the specified event listener.\n\t *\n\t * You must pass the exact function reference used when the event was added. If a proxy\n\t * function, or function closure is used as the callback, the proxy/closure reference must be used - a new proxy or\n\t * closure will not work.\n\t *\n\t * @example\n\t * displayObject.removeEventListener(\"click\", handleClick);\n\t *\n\t * @param {string} type The string type of the event.\n\t * @param {Function|Object} listener The listener function or object.\n\t * @param {boolean} [useCapture=false] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t */\n\tremoveEventListener (type, listener, useCapture = false) {\n\t\tconst listeners = useCapture ? this._captureListeners : this._listeners;\n\t\tif (!listeners) { return; }\n\t\tconst arr = listeners[type];\n\t\tif (!arr) { return; }\n\t\tconst l = arr.length;\n\t\tfor (let i = 0; i < l; i++) {\n\t\t\tif (arr[i] === listener) {\n\t\t\t\tif (l === 1) { delete(listeners[type]); } // allows for faster checks.\n\t\t\t\telse { arr.splice(i, 1); }\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * A shortcut to the removeEventListener method, with the same parameters and return value. This is a companion to the\n\t * `on` method.\n\t *\n\t * To remove a listener added with `on`, you must pass in the returned wrapper function as the listener. See\n\t * {@link core.EventDispatcher#on} for an example.\n\t *\n\t * @param {string} type The string type of the event.\n\t * @param {Function|Object} listener The listener function or object.\n\t * @param {boolean} [useCapture=false] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t */\n\toff (type, listener, useCapture = false) {\n\t\tthis.removeEventListener(type, listener, useCapture);\n\t}\n\n\t/**\n\t * Removes all listeners for the specified type, or all listeners of all types.\n\t *\n\t * @example\n\t * // remove all listeners\n\t * displayObject.removeAllEventListeners();\n\t *\n\t * // remove all click listeners\n\t * displayObject.removeAllEventListeners(\"click\");\n\t *\n\t * @param {string} [type=null] The string type of the event. If omitted, all listeners for all types will be removed.\n\t */\n\tremoveAllEventListeners (type = null) {\n\t\tif (type) {\n\t\t\tif (this._listeners) { delete(this._listeners[type]); }\n\t\t\tif (this._captureListeners) { delete(this._captureListeners[type]); }\n\t\t} else {\n\t\t\tthis._listeners = this._captureListeners = null;\n\t\t}\n\t}\n\n\t/**\n\t * Dispatches the specified event to all listeners.\n\t *\n\t * @example\n\t * // use a string event\n\t * this.dispatchEvent(\"complete\")\n\t *\n\t * // use an Event instance\n\t * const event = new createjs.Event(\"progress\");\n\t * this.dispatchEvent(event);\n\t *\n\t * @param {Object|Event|string} eventObj An object with a \"type\" property, or a string type.\n\t * While a generic object will work, it is recommended to use a CreateJS Event instance. If a string is used,\n\t * dispatchEvent will construct an Event instance if necessary with the specified type. This latter approach can\n\t * be used to avoid event object instantiation for non-bubbling events that may not have any listeners.\n\t * @param {boolean} [bubbles=false] Specifies the `bubbles` value when a string was passed to eventObj.\n\t * @param {boolean} [cancelable=false] Specifies the `cancelable` value when a string was passed to eventObj.\n\t * @return {boolean} Returns false if `preventDefault()` was called on a cancelable event, true otherwise.\n\t */\n\tdispatchEvent (eventObj, bubbles = false, cancelable = false) {\n\t\tif (typeof eventObj === \"string\") {\n\t\t\t// skip everything if there's no listeners and it doesn't bubble:\n\t\t\tconst listeners = this._listeners;\n\t\t\tif (!bubbles && (!listeners || !listeners[eventObj])) { return true; }\n\t\t\teventObj = new Event(eventObj, bubbles, cancelable);\n\t\t} else if (eventObj.target && eventObj.clone) {\n\t\t\t// redispatching an active event object, so clone it:\n\t\t\teventObj = eventObj.clone();\n\t\t}\n\n\t\t// TODO: it would be nice to eliminate this. Maybe in favour of evtObj instanceof Event? Or !!evtObj.createEvent\n\t\ttry { eventObj.target = this; } catch (e) {} // try/catch allows redispatching of native events\n\n\t\tif (!eventObj.bubbles || !this.parent) {\n\t\t\tthis._dispatchEvent(eventObj, 2);\n\t\t} else {\n\t\t\tlet top = this;\n\t\t\tconst list = [top];\n\t\t\twhile (top.parent) { list.push(top = top.parent); }\n\t\t\tconst l = list.length;\n\t\t\tlet i;\n\n\t\t\t// capture & atTarget\n\t\t\tfor (i = l - 1; i >= 0 && !eventObj.propagationStopped; i--) {\n\t\t\t\tlist[i]._dispatchEvent(eventObj, 1+(i==0));\n\t\t\t}\n\t\t\t// bubbling\n\t\t\tfor (i = 1; i < l && !eventObj.propagationStopped; i++) {\n\t\t\t\tlist[i]._dispatchEvent(eventObj, 3);\n\t\t\t}\n\t\t}\n\t\treturn !eventObj.defaultPrevented;\n\t}\n\n\t/**\n\t * Indicates whether there is at least one listener for the specified event type.\n\t *\n\t * @param {string} type The string type of the event.\n\t * @return {boolean} Returns true if there is at least one listener for the specified event.\n\t */\n\thasEventListener (type) {\n\t\tconst listeners = this._listeners, captureListeners = this._captureListeners;\n\t\treturn !!((listeners && listeners[type]) || (captureListeners && captureListeners[type]));\n\t}\n\n\t/**\n\t * Indicates whether there is at least one listener for the specified event type on this object or any of its\n\t * ancestors (parent, parent's parent, etc). A return value of true indicates that if a bubbling event of the\n\t * specified type is dispatched from this object, it will trigger at least one listener.\n\t *\n\t * This is similar to {@link core.EventDispatcher#hasEventListener}, but it searches the entire\n\t * event flow for a listener, not just this object.\n\t *\n\t * @param {string} type The string type of the event.\n\t * @return {boolean} Returns `true` if there is at least one listener for the specified event.\n\t */\n\twillTrigger (type) {\n\t\tlet o = this;\n\t\twhile (o) {\n\t\t\tif (o.hasEventListener(type)) { return true; }\n\t\t\to = o.parent;\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * @return {String} a string representation of the instance.\n\t */\n\ttoString () {\n\t\treturn `[${this.constructor.name + this.name ? ` ${this.name}` : \"\"}]`;\n\t}\n\n\t/**\n\t * @private\n\t * @param {Object|Event|string} eventObj\n\t * @param {Object} eventPhase\n\t */\n\t_dispatchEvent (eventObj, eventPhase) {\n\t\tconst listeners = eventPhase === 1 ? this._captureListeners : this._listeners;\n\t\tif (eventObj && listeners) {\n\t\t\tlet arr = listeners[eventObj.type];\n\t\t\tlet l;\n\t\t\tif (!arr || (l = arr.length) === 0) { return; }\n\t\t\ttry { eventObj.currentTarget = this; } catch (e) {}\n\t\t\ttry { eventObj.eventPhase = eventPhase; } catch (e) {}\n\t\t\teventObj.removed = false;\n\n\t\t\tarr = arr.slice(); // to avoid issues with items being removed or added during the dispatch\n\t\t\tfor (let i = 0; i < l && !eventObj.immediatePropagationStopped; i++) {\n\t\t\t\tlet o = arr[i];\n\t\t\t\tif (o.handleEvent) { o.handleEvent(eventObj); }\n\t\t\t\telse { o(eventObj); }\n\t\t\t\tif (eventObj.removed) {\n\t\t\t\t\tthis.off(eventObj.type, o, eventPhase === 1);\n\t\t\t\t\teventObj.removed = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nexport default EventDispatcher;\n","import EventDispatcher from \"@createjs/core/src/events/EventDispatcher\";\nimport Sound from \"./Sound\";\n\n\nexport default class AbstractAudioWrapper extends EventDispatcher{\n\tset volume(val) {\n\t\tthis.volumeNode.gain.value = val;\n\t}\n\n\tget volume() {\n\t\treturn this.volumeNode.gain.value;\n\t}\n\n\tset pan(val) {\n\t\tthis.panNode.setPosition(val, 0, 0.5);\n\t}\n\n\tget pan() {\n\t\treturn this.panNode.pan.value;\n\t}\n\n\tset muted(val){\n\t\tif(val){\n\t\t\tthis.mute();\n\t\t}else{\n\t\t\tthis.unmute();\n\t\t}\n\t}\n\n\tget muted(){\n\t\treturn this._muted;\n\t}\n\n\tconstructor(){\n\t\tsuper();\n\t\tlet ctx = Sound.context;\n\n\t\tthis.outputNode = this.volumeNode = ctx.createGain();\n\n\t\tthis.panNode = this.postFxNode = ctx.createPanner();\n\t\tthis.panNode.connect(this.outputNode);\n\n\t\tthis.muterNode = ctx.createGain();\n\t\tthis.muterNode.gain.value = 0;\n\t\tthis.muterNode.connect(this.outputNode);\n\n\t\tthis.fxBus = ctx.createGain();\n\t\tthis.fxBus.connect(this.panNode);\n\n\t\tthis._effects = [];\n\t\tthis.muted = false;\n\t}\n\n\tmute(){\n\t\tif(this._muted){\n\t\t\treturn;\n\t\t}\n\t\tthis.panNode.disconnect(this.outputNode);\n\t\tthis.panNode.connect(this.muterNode);\n\t\tthis._muted = true;\n\t}\n\n\tunmute(){\n\t\tif(!this._muted){\n\t\t\treturn;\n\t\t}\n\t\tthis.panNode.disconnect(this.muterNode);\n\t\tthis.panNode.connect(this.outputNode);\n\t\tthis._muted = false;\n\t}\n\n\t//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\t// Effects\n\n\taddEffect(effect){\n\t\tthis.effects = this._effects.concat([effect]);\n\t}\n\n\tgetEffects(){\n\t\treturn this._effects;\n\t}\n\n\tcloneEffects(){\n\t\t// TODO: implement.\n\t}\n\n\tset effects(effects){\n\t\tthis.removeAllEffects();\n\n\t\tif(!effects || !effects.length){\n\t\t\t// Valid data or empty array required (and the array was emptied in removeAllEffects above)\n\t\t\treturn;\n\t\t}\n\n\t\t// Check that all the individual effects are valid:\n\t\tfor(let i = 0; i < effects.length; i++){\n\t\t\tlet e = effects[i];\n\t\t\tif(e.owner){\n\t\t\t\tthrow new Error(\"Error adding Effects - An effect in the provided list at index \" + i +  \" is already added to another Group, Sample, or Playback.\"\n\t\t\t\t\t+ \"  Effects can be cloned to be used in multiple places, or alternately, can be placed on Groups to apply to all Samples in the Group.\")\n\t\t\t}\n\t\t}\n\n\t\t// Store the effects list and connect up the audio graph of the effect chain:\n\n\t\tlet firstEffect = effects[0];\n\t\tfirstEffect.owner = this;\n\t\tthis._effects.push(firstEffect);\n\n\t\tthis.fxBus.disconnect();\n\t\tthis.fxBus.connect(firstEffect.inputNode);\n\n\t\tfor(let j = 1 ; j < effects.length; j++){\n\t\t\tlet e = effects[j];\n\t\t\teffects[j-1].connect(e);\n\t\t\te.owner = this;\n\t\t\tthis._effects.push(e);\n\t\t}\n\t\teffects[effects.length-1].connect(this.postFxNode);\n\n\t}\n\n\tremoveAllEffects(){\n\t\tthis.fxBus.disconnect();\n\t\tfor(let i = 0; i < this._effects.length; i++){\n\t\t\tlet e = this._effects[i];\n\t\t\te.owner = null;\n\t\t\te.disconnect();\n\t\t}\n\t\tthis.fxBus.connect(this.postFxNode);\n\n\t\tthis._effects.splice(0, this._effects.length); // Empty the array in place\n\t}\n}\n","import Sound from \"./Sound\";\nimport Playback from \"./Playback\";\nimport AbstractAudioWrapper from \"./AbstractAudioWrapper\";\n\nclass Sample extends AbstractAudioWrapper {\n\n\tget elapsed(){\n\t\tif(this.playbacks.length === 0) { return 0; }\n\t\treturn this.playbacks[this.playbacks.length-1].elapsed;\n\t}\n\n\tget position(){\n\t\tif(this.playbacks.length === 0) { return 0; }\n\t\treturn this.playbacks[this.playbacks.length-1].position;\n\t}\n\n\tset paused(val){\n\t\tif(val){\n\t\t\tthis.pause();\n\t\t}else{\n\t\t\tthis.resume();\n\t\t}\n\t}\n\n\tget paused(){\n\t\tif(this.playbacks.length < 1){\n\t\t\treturn false;\n\t\t}\n\n\t\tfor(let i = 0; i < this.playbacks.length; i++){\n\t\t\tif(!this.playbacks[i].paused){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tset loops(val){\n\t\tthis._loops = val;\n\t}\n\n\tget loops(){\n\t\treturn this._loops;\n\t}\n\n\tget duration() {\n\t\treturn this.audioBuffer ? this.audioBuffer.duration : null;\n\t}\n\n\tconstructor(src, options = {}, parent = Sound.rootGroup ) {\n\t\tsuper();\n\t\t//let ctx = Sound.context;\n\n\t\tthis.playbacks = [];\n\n\t\tthis.audioBuffer = null;\n\t\tthis._playbackRequested = false;\n\n\t\tthis.src = null;\n\n\t\tthis.volume  = isNaN(Number(options.volume)) ? 1 : Number(options.volume); \t\t// 1 default\n\t\tthis.loops   = isNaN(Number(options.loops )) ? 0 : Math.max(Number(options.loops) | 0, -1);\t\t// 0 default, >= -1, integers only\n\t\tthis.delay   = isNaN(Number(options.delay )) ? 0 : Number(options.delay);\t\t\t// 0 default\n\t\tthis.pan     = isNaN(Number(options.pan   )) ? 0 : Number(options.pan); \t\t\t// 0 default\n\t\tthis.offset  = isNaN(Number(options.offset)) ? 0 : Number(options.offset);\t\t// 0 default\n\n\t\tthis.playDuration = options.playDuration; \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// No default needed, undefined means \"play until end\"\n\n\t\t//this._resolveSource(src);\n\t\tSound.requestBuffer(src).then( (result) => {this.src = result.bufferId; this.handleAudioDecoded(result.audioBuffer);} );\n\n\t\tthis.parent = null; // Set to null here only to show that this variable exists on Samples. Samples should always have a parent group.\n\t\tparent.add(this);\n\t}\n\n\t_resolveSource(src) {\n\t\tlet ctx = Sound.context;\n\n\t\tif (src instanceof ArrayBuffer) {\n\t\t\tctx.decodeAudioData(src, this.handleAudioDecoded.bind(this), this.handleAudioDecodeError.bind(this));\n\t\t} else if (src instanceof AudioBuffer) {\n\t\t\tthis.audioBuffer = src;\n\t\t} else if (typeof src === \"string\") {\n\t\t\tif (/^data:.*?,/.test(src)) { // Test for Data URL\n\t\t\t\t// Data URLs can just be loaded by XHR, so pass it in\n\t\t\t\tthis.loadAudio(src);\n\t\t\t} else {\n\t\t\t\t// Assumed to be a regular url at this point\n\t\t\t\tthis.src = this._ensureValidFileExtension(src);\n\t\t\t\tthis.loadAudio(this.src);\n\t\t\t}\n\t\t} else if (src instanceof Array) {\n\t\t\tfor (let i = 0; i < src.length; i++) {\n\t\t\t\tlet u = src[i];\n\t\t\t\tif (Sound.isExtensionSupported(u, false)) {\n\t\t\t\t\tthis.src = u;\n\t\t\t\t\tthis.loadAudio(this.src);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (typeof src === \"object\") {\n\t\t\t// Assume a source of the format: {<ext>:<url>} e.g. {mp3: path/to/file/sound.mp3, ogg: other/path/soundFileWithNoExtension}\n\t\t\tfor (let ext in src) {\n\t\t\t\tif (!src.hasOwnProperty(ext)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (Sound.isExtensionSupported(ext, false)) {\n\t\t\t\t\tthis.src = src[ext];\n\t\t\t\t\tthis.loadAudio(this.src);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_ensureValidFileExtension(url) {\n\t\t// Not a data URL, so let's doublecheck the file extension before loading.\n\t\tlet extensionExp = /\\.\\w+$/;\n\t\tlet result = extensionExp.exec(url);\n\t\tif (result === null) {\n\t\t\t// No file extension, so add one\n\t\t\turl = url.concat(\".\" + Sound.fallbackFileExtension);\n\t\t} else {\n\t\t\t// Found a file extension. Check if it's supported. If it's definitely not, fall back.\n\t\t\tlet extension = result[0].substr(1);\n\t\t\tif (!Sound.isExtensionSupported(extension, false)) {\n\t\t\t\turl = url.replace(extensionExp, \".\" + Sound.fallbackFileExtension);\n\t\t\t}\n\t\t}\n\t\treturn url;\n\t}\n\n\tclone() {\n\t\tlet o = new Sample(this.audioBuffer);\n\t\to.volume = this.volume;\n\t\to.pan = this.pan;\n\t\to.loops = this.loops;\n\t\to.delay = this.delay;\n\t\to.offset = this.offset;\n\t\to.interrupt = this.interrupt;\n\t\t// TODO: clone FX chain, other properties\n\t\treturn o;\n\t}\n\n\t/**\n\t * Play the sample. This creates and starts a new Playback of the sample, if it's loaded. If it's not loaded, calling this function\n\t * will make the Sample play when it finishes loading. A sample will only play once when it finishes loading, no matter how many\n\t * times play was called.\n\t * @returns {*}\n\t */\n\tplay(playProps) {\n\t\tif (!this.audioBuffer) {\n\t\t\tthis._playbackRequested = true;\n\t\t\tthis._requestedPlaybackPlayprops = playProps;\n\t\t\treturn null;\n\t\t} else {\n\t\t\treturn this._play(playProps);\n\t\t}\n\t}\n\n\t_play(playProps) {\n\t\tplayProps = playProps || {loops: this.loops, playDuration: this.playDuration, offset: this.offset, delay: this.delay};\n\t\tlet pb = new Playback(this.audioBuffer, playProps);\n\n\t\tthis.playbacks.push(pb);\n\t\tpb.outputNode.connect(this.fxBus);\n\n\t\tpb.addEventListener(\"end\", this.handlePlaybackEnd.bind(this));\n\t\tpb.addEventListener(\"stop\", this.handlePlaybackStopped.bind(this));\n\t\tpb.addEventListener(\"destroyed\", this.handlePlaybackDestroyed.bind(this));\n\n\t\treturn pb;\n\t}\n\n\t/**\n\t * Pause all playbacks of this sample.\n\t */\n\tpause() {\n\t\tthis.playbacks.slice().forEach((pb) => pb.pause());\n\t}\n\n\t/**\n\t * Resume all paused playbacks of this sample.\n\t */\n\tresume() {\n\t\tthis.playbacks.slice().forEach((pb) => pb.resume());\n\t}\n\n\t/**\n\t * Stop all playbacks of this sample, destroying them.\n\t */\n\tstop() {\n\t\tthis.playbacks.slice().forEach((pb) => pb.stop());\n\t}\n\n\t// Loading and Decoding\n\n\tloadAudio(url) {\n\t\tlet request = new XMLHttpRequest();\n\t\trequest.open('GET', url, true);\n\t\trequest.responseType = 'arraybuffer';\n\t\trequest.onload = this.handleAudioLoaded.bind(this);\n\t\trequest.send();\n\t}\n\n\t/**\n\t * Destroy this sample. Halts and destroys all playbacks, and dispatches a destruction event, which should be reacted\n\t * to by any containers (e.g. Groups or any external tracking) containing this sample by removing it from their lists\n\t * so it can be garbage collected.\n\t */\n\tdestroy() {\n\t\tthis.stop();\n\t\t// TODO: review approach for preventing future plays.\n\t\tthis._play = () => {\n\t\t\tthrow new Error(\"Cannot play Sample after it has been destroyed.\")\n\t\t};\n\t\tthis.dispatchEvent(\"destroyed\");\n\t\tthis.removeAllEventListeners();\n\t}\n\n\thandleAudioLoaded(loadEvent) {\n\t\tlet xhr = loadEvent.target;\n\t\tif(xhr.readyState === 4 && xhr.status === 200){\n\t\t\tlet ctx = Sound.context;\n\t\t\tlet result = loadEvent.target.response;\n\n\t\t\tSound.requestBuffer(result).then( (ab) => { this.handleAudioDecoded(ab); } );\n\n\t\t\t//ctx.decodeAudioData(result, this.handleAudioDecoded.bind(this), this.handleAudioDecodeError.bind(this));\n\t\t}\n\t}\n\n\thandleAudioDecoded(buffer) {\n\t\tthis.audioBuffer = buffer;\n\n\t\tthis.dispatchEvent(\"ready\");\n\n\t\tif (this._playbackRequested) {\n\t\t\tthis._play(this._requestedPlaybackPlayprops);\n\t\t}\n\t}\n\n\thandleAudioDecodeError(e) {\n\t\tconsole.warn(\"Error decoding audio data in Sample.\")\n\t}\n\n\thandlePlaybackEnd(e) {\n\t\tthis.dispatchEvent(\"playbackEnd\");\n\t}\n\n\thandlePlaybackStopped(e) {\n\t\tthis.dispatchEvent(\"playbackStop\");\n\t}\n\n\thandlePlaybackDestroyed(e) {\n\t\tlet index = this.playbacks.indexOf(e.target);\n\t\tif (index > -1) {\n\t\t\tthis.playbacks.splice(index, 1);\n\t\t}\n\t\tthis.dispatchEvent(\"playbackDestroyed\")\n\t}\n\n\t//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\t// SoundJS 1.0 Parity\n\n\n\tmakePlayPropsObj(){\n\t\treturn {\n\t\t\tvolume:    this.volume,\n\t\t\tloops:     this.loops,\n\t\t\tdelay:     this.delay,\n\t\t\tpan:       this.pan,\n\t\t\toffset:    this.offset,\n\t\t\tinterrupt: this.interrupt,\n\t\t\tduration:  this.playDuration\n\t\t};\n\t}\n\n\tconsumePlayPropsObj(o){\n\t\tif(!o){return;}\n\n\t\tthis.volume  = isNaN(Number(o.volume)) ? this.volume : Number(o.volume);\n\t\tthis.loops   = isNaN(Number(o.loops )) ? this.loops  : Math.max(Number(o.loops) | 0, -1);\t\t// must be >= -1, and an integer\n\t\tthis.delay   = isNaN(Number(o.delay )) ? this.delay  : Number(o.delay);\n\t\tthis.pan     = isNaN(Number(o.pan   )) ? this.pan    : Number(o.pan);\n\t\tthis.offset  = isNaN(Number(o.offset)) ? this.offset : Number(o.offset);\n\n\t\tthis.interrupt = (  o.interrupt === undefined ? this.interrupt : o.interrupt);\n\t\tthis.playDuration = o.hasOwnProperty('playDuration') ? o.playDuration : this.playDuration;\t// \"undefined\" is a valid value (means play to end). Null, in SJS2, also means play to end.\n\t}\n\n}\n\nexport default Sample;\n","import Sound from \"./Sound\";\nimport Sample from \"./Sample\";\nimport AbstractAudioWrapper from \"./AbstractAudioWrapper\";\n\n\nclass Group extends AbstractAudioWrapper {\n\n\tconstructor(parent) {\n\t\tsuper();\n\t\tlet ctx = Sound.context;\n\n\t\tthis.inputNode = ctx.createGain();\n\t\tthis.inputNode.connect(this.fxBus);\n\n\t\tthis.samples = [];\n\t\tthis.subgroups = [];\n\n\t\tif(!parent || !(parent instanceof Group)){\n\t\t\tparent = Sound.rootGroup;\n\t\t}\n\n\t\tif(parent){\n\t\t\tparent.add(this);\n\t\t}\n\t}\n\n\tadd(groupOrSample) {\n\t\tif (groupOrSample instanceof Group) {\n\t\t\tthis._addGroup(groupOrSample);\n\t\t} else if (groupOrSample instanceof Sample) {\n\t\t\tthis._addSample(groupOrSample);\n\t\t}else{\n\t\t\tconsole.warn(\"Warning: Attempted to add an object that was not a Group or a Sample as a child to a Group; object was ignored.\")\n\t\t}\n\t}\n\n\t_addGroup(subgroup) {\n\t\tif(subgroup.parent){\n\t\t\tsubgroup.parent._remove(subgroup);\n\t\t}\n\t\tsubgroup.parent = this;\n\t\tthis.subgroups.push(subgroup);\n\t\tsubgroup.outputNode.connect(this.inputNode);\n\t}\n\n\t_addSample(sample) {\n\t\tif(sample.parent){\n\t\t\tsample.parent._remove(sample);\n\t\t}\n\t\tsample.parent = this;\n\t\tthis.samples.push(sample);\n\t\tsample.outputNode.connect(this.inputNode);\n\t\tsample.on(\"destroyed\", this.handleSampleDestroyed, this);\n\t}\n\n\t// Shouldn't be used during normal usage, and is normally only called as part of an add to another group.\n\t_remove(groupOrSample){\n\t\tif (groupOrSample instanceof Group) {\n\t\t\tthis._removeGroup(groupOrSample);\n\t\t} else if (groupOrSample instanceof Sample) {\n\t\t\tthis._removeSample(groupOrSample);\n\t\t}\n\t}\n\n\t_removeGroup(subgroup){\n\t\tlet index = this.subgroups.indexOf(subgroup);\n\n\t\tif(index === -1){\n\t\t\tthrow new Error(\"Cannot remove subgroup from group - group not found in subgroups list.\")\n\t\t}\n\n\t\tsubgroup.outputNode.disconnect(this.inputNode);\n\t\tthis.subgroups.splice(index, 1);\n\t}\n\n\t_removeSample(sample){\n\t\tlet index = this.samples.indexOf(sample);\n\n\t\tif(index === -1){\n\t\t\tthrow new Error(\"Cannot remove sample from group - group not found in samples list.\")\n\t\t}\n\n\t\tsample.outputNode.disconnect(this.inputNode);\n\t\tthis.samples.splice(index, 1);\n\t}\n\n\t// NOTE: depending on group architecture, play/pause/resume  may need to change. E.G. if loops within the group structure are allowed,\n\t// then we need to check if we've played a group before in this call of play before playing it, to prevent infinite looping.\n\n\t/**\n\t * Plays all samples in this group, and in all subgroups.\n\t */\n\tplay() {\n\t\tthis.samples.forEach(s => s.play());\n\t\tthis.subgroups.forEach(g => g.play());\n\t}\n\n\t/**\n\t * Pauses all samples in this group, and in all subgroups.\n\t */\n\tpause() {\n\t\tthis.samples.forEach(s => s.pause());\n\t\tthis.subgroups.forEach(g => g.pause());\n\t}\n\n\t/**\n\t * Unpauses all samples in this group, and in all subgroups.\n\t */\n\tresume() {\n\t\tthis.samples.forEach(s => s.resume());\n\t\tthis.subgroups.forEach(g => g.resume());\n\t}\n\n\tstop() {\n\t\tthis.samples.forEach(s => s.stop());\n\t\tthis.subgroups.forEach(g => g.stop());\n\t}\n\n\thandleSampleDestroyed(e) {\n\t\tlet index = this.samples.indexOf(e.target);\n\t\tif (index > -1) {\n\t\t\tthis.samples.splice(index, 1);\n\t\t}\n\t\tthis.dispatchEvent(\"sampleDestroyed\");\n\t\tconsole.log(\"Sample destroyed\");\n\t}\n\n\t_getSampleDescendantsBySource(src){\n\t\tlet out = new Set();\n\n\t\tthis.samples.forEach( s => {  if(s.src === src){  out.add(s)  }   }); // Return all samples in this group that match...\n\n\t\tthis.subgroups.forEach( g => {                                    // ... and recursively run on subgroups, too\n\t\t\tlet sub = g._getSampleDescendantsBySource(src);\n\t\t\tsub.forEach(s => out.add(s))\n\t\t});\n\n\t\treturn Array.from(out);\n\t}\n\n\t_getAllSampleDescendants(){\n\t\tlet out = new Set();\n\n\t\tthis.samples.forEach(  s => out.add(s)  ); \t\t\t\t\t\t\t\t\t\t\t\t// Return all samples in this group...\n\n\t\tthis.subgroups.forEach( g => {                                    // ... and recursively run on subgroups, too\n\t\t\tlet sub = g._getAllSampleDescendants(src);\n\t\t\tsub.forEach(s => out.add(s))\n\t\t});\n\n\t\treturn Array.from(out);\n\t}\n\n}\n\nexport default Group;\n\n","import Group from \"./Group\";\nimport Sample from \"./Sample\";\nimport EventDispatcher from \"@createjs/core/src/events/EventDispatcher\";\n\nclass Sound {\n\n\t// Sets up all static class defaults. This function is immediately invoked below the Sound class definition to ensure it runs.\n\tstatic _initialize() {\n\t\tEventDispatcher.initialize(Sound);\n\n\t\tlet soundContextClass = window.AudioContext || window.webkitAudioContext;\n\t\tSound.__context = new soundContextClass();\n\n\t\tSound.__rootGroup = new Group(null);\n\t\tSound.__rootGroup.outputNode.connect(Sound.context.destination);\n\n\t\tSound.__fileExtensionPriorityList = [\"mp3\"];\n\t\tSound._strictFallbacks = true;\n\t\tSound._idHash = {};\n\t\tSound._arrayBufferIdSuffix = 0;\n\t\tSound._audioBufferIdSuffix = 0;\n\t\tSound._audioBuffers = {};\n\t}\n\n\t// Read-only properties\n\tstatic get context() {\n\t\treturn Sound.__context;\n\t}\n\n\tstatic get rootGroup() {\n\t\treturn Sound.__rootGroup;\n\t}\n\n\t// Simple static properties\n\tstatic get strictFallbacks() {\n\t\treturn Sound._strictFallbacks;\n\t}\n\n\tstatic set strictFallbacks(val) {\n\t\tSound._strictFallbacks = val;\n\t}\n\n\t// More complex static properties\n\n\tstatic get fileExtensionPriorityList() {\n\t\treturn Sound.__fileExtensionPriorityList;\n\t}\n\n\tstatic set fileExtensionPriorityList(newList) {\n\t\tlet list = Sound.fileExtensionPriorityList;\n\n\t\t// Swap the array contents in place so external refs stay valid:\n\t\tlist.splice(0, list.length);\n\t\tnewList.forEach(item => list.push(item));\n\t}\n\n\tstatic get fallbackFileExtension() {\n\t\t// Look up the fallback file extension each time. Performance cost should be small (since sound loading should be gated by\n\t\t// the loading part), and the array of fallback file extensions may have changed without our knowledge.\n\n\t\tlet testElement = document.createElement(\"audio\");\n\t\tlet bestMaybe = null;\n\t\tfor (let i = 0; i < Sound.fileExtensionPriorityList.length; i++) {\n\t\t\tlet extension = Sound.fileExtensionPriorityList[i];\n\t\t\tlet result = testElement.canPlayType(\"audio/\" + extension);\n\n\t\t\tswitch (result) {\n\t\t\t\tcase \"probably\":\n\t\t\t\t\treturn extension; // Found a good one, return it\n\t\t\t\tcase \"maybe\":\n\t\t\t\t\tif (!Sound.strictFallbacks) {\n\t\t\t\t\t\treturn extension // Not in strict mode, 'maybe' is okay.\n\t\t\t\t\t} else if (bestMaybe === null) {\n\t\t\t\t\t\tbestMaybe = extension; // Haven't found a best maybe yet, store this one off in case we don't find a \"probably\".\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"\":\n\t\t\t\t// this extension not supported, no-op\n\t\t\t\tdefault:\n\t\t\t\t// no-op\n\t\t\t}\n\t\t}\n\n\t\t// We didn't find anything, so return our best maybe, or null if we didn't even find one of those.\n\t\treturn bestMaybe || null;\n\t}\n\n\t/**\n\t * Register a sample for static access via Sound.playSound(id); If a source (e.g. a URL) is given instead of a sample, a sample will\n\t * be created with that source. If no ID is given, the source of the sample will be used, if possible. If the ID is\n\t * already in use, the sound will not be registered and this function will throw an error.\n\t * @param sampleOrSource\n\t * @param id\n\t */\n\tstatic registerSound(sampleData, id, defaultPlayProps) {\n\t\tid = id || Sound._generateRegistrationId(sampleData);\n\n\t\tif (Sound._idHash[id]) {\n\t\t\t// Id is in use. Check for a match.\n\t\t\tif (Sound._idHash[id] === sampleData || Sound._idHash[id].src === sampleData) {\t\t// Match logic: If a sample was provided, it must be exactly equal to the already registered sample.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// If a source was provided, compare the source to the source of the existing sample, and if they match, the samples match.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Note that this will always fail for data URLs and array buffers, as these are too large and not stored in a sample's src.\n\t\t\t\t// Sound already exists, but if they registered with props, they probably expect those props:\n\t\t\t\tdefaultPlayProps && Sound._idHash[id].consumePlayPropsObj(defaultPlayProps);\n\t\t\t\treturn;\n\t\t\t}else{\n\t\t\t\t// Throw an error if there's a conflict.\n\t\t\t\tthrow new Error(`Error registering sound with id \"${id}\" - id already in use.`)\n\t\t\t}\n\t\t}\n\n\t\t// No existing entry found, so create this sample (or use the existing one) and store for later use:\n\t\tlet sample = (sampleData instanceof Sample) ? sampleData : new Sample(sampleData);\n\t\tsample.consumePlayPropsObj(defaultPlayProps);\n\t\tSound._idHash[id] = sample;\n\t}\n\n\t/**\n\t * Generates a usable id for registering a sound under, in the case the user didn't provide one. Will use a provided\n\t * source as an ID, or uses the Sample's source if a sample was provided.\n\t * @param sampleOrSource The source or sample to generate an ID for.\n\t * @returns {*}\n\t * @private\n\t */\n\tstatic _generateRegistrationId(sampleOrSource) {\n\t\treturn (sampleOrSource instanceof Sample) ? sampleOrSource.src : sampleOrSource;\n\t}\n\n\t/**\n\t * Removes a sample previously registered for static tracking, either by Sound.play or Sound.registerSound. For the removal\n\t * of a single sample, use sample.destroy. To remove all samples with a given url source, use Sound.purgeSamples\n\t * @param id\n\t */\n\tstatic removeSound(id) {\n\t\t// TODO: basepath?\n\t\tlet sample = Sound._idHash[id];\n\t\tif (sample) {\n\t\t\tdelete Sound._idHash[id];\n\t\t\tsample.destroy();\n\t\t}else{\n\t\t\tthrow new Error(\"Could not remove sample - sample not found.\")\n\t\t}\n\t}\n\n\t/**\n\t * Play a sound - either a previously registered one, or, if not found, assume the \"id\" is a source and attempt to\n\t * make a sample and play it.\n\t * @param idOrSrc The identifier of the sound to play.\n\t * @param playProps Optional. The properties to apply to the sound.\n\t */\n\tstatic play(idOrSrc, playProps) {\n\t\tlet registered = Sound._idHash[idOrSrc]; // Will this cause problems with people trying to make a new sample?\n\t\tif (registered) {\n\t\t\tregistered.play(playProps);\n\t\t\treturn registered;\n\t\t} else {\n\t\t\t// ID not found. Assume it is a source.\n\t\t\tlet sample = new Sample(idOrSrc);\n\t\t\tSound.registerSound(sample, idOrSrc);\n\t\t\tsample.play(playProps);\n\t\t\treturn sample;\n\t\t}\n\t}\n\n\t/**\n\t * Stops ALL sounds that SoundJS is playing.\n\t */\n\tstatic stop(){\n\t\tSound.rootGroup.stop();\n\t}\n\n\tstatic isExtensionSupported(pathOrExtension, strict = true) {\n\t\t// The file extension is assumed to be either \"everything after the last '.' character\", or, if there is no ., the whole string.\n\t\tlet match = /\\.(\\w+)$/.exec(pathOrExtension);\n\t\tlet ext = match ? match[1] : pathOrExtension;\n\t\tlet result = document.createElement(\"audio\").canPlayType(\"audio/\" + ext);\n\t\t//return result !== \"\";\n\t\treturn strict ? result === \"probably\" : result !== \"\";\n\t}\n\n\tstatic purgeSamples(urlOrId) {\n\t\t// TODO: Implement. Intention: search the group tree for all samples with a matching URL or ID and destroy them.\n\n\t\tlet samples = null;\n\t\tif(urlOrId === \"\" || urlOrId === undefined){\n\t\t\tsamples = Sound.rootGroup._getAllSampleDescendants();\n\t\t}else{\n\t\t\tsamples = Sound.rootGroup._getSampleDescendantsBySource(urlOrId)\n\t\t}\n\n\t\tif(Sound._idHash[urlOrId]){\n\t\t\tSound.removeSound(urlOrId);\n\t\t}\n\n\t\tsamples.forEach(  s => s.destroy()  );\n\n\t}\n\n\n\t////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\t// GROUP PARITY:\n\t// These functions make the root static Sound object 'grouplike' - you can interact with it like it were a group and\n\t// it will affect all sounds in SoundJS's group tree.\n\n\t/*static get samples(){\n    \treturn this.rootGroup.samples;\n\t}\n\n\tstatic get groups(){\n    \treturn this.rootGroup.subgroups;\n\t}*/\n\n\tstatic pause() {\n\t\tthis.rootGroup.pause();\n\t}\n\n\tstatic resume() {\n\t\tthis.rootGroup.resume();\n\t}\n\n\tstatic add(sampleOrGroup) {\n\t\tthis.rootGroup.add(sampleOrGroup);\n\t}\n\n\t////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\t// SOUNDJS 1 PARITY:\n\t// These functions are mostly passthroughs to new implementations, and exist to allow some backwards compatability\n\t// with soundJS 1.\n\n\n\t/*static createInstance(src, offset, playDuration) {\n\t\treturn new Sample(src, {offset: offset, playDuration: playDuration});\n\t}\n\n\tstatic getDefaultPlayProps(sampleOrId) {\n\t\t// TODO: implement. Search IDs and active samples for one that matches the src, and get the default play props of that sound.\n\n\t\tlet sample = sampleOrId instanceof Sample ? sampleOrId : Sound._idHash[sampleOrId];\n\n\t\tif(sample){\n\t\t\treturn sample.makePlayPropsObj();\n\t\t}else{\n\t\t\t// TODO: Revisit this, like with setDefaultPlayProps\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tstatic setDefaultPlayProps(sampleOrId, props) {\n\t\tif(sampleOrSrcOrId instanceof Sample){\n\t\t\tsampleOrSrcOrId.consumePlayPropsObj(props);\n\t\t}else if(Sound.rootGroup[sampleOrSrcOrId]){\n\t\t\tSound.rootGroup[sampleOrSrcOrId].consumePlayPropsObj(props);\n\t\t}else{\n\t\t\t// TODO: Revisit this behaviour\n\t\t\tthrow new Error(`Couldn't set default play props on ${sampleOrId}: object is neither a sample nor an ID of a statically stored sound.` )\n\t\t}\n\n\t}*/\n\n\tstatic getSampleBySrc(src){\n\t\tlet list = Sound.getSamplesBySrc(src);\n\t\tif(list){\n\t\t\treturn list[0];\n\t\t}else{\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tstatic getSamplesBySrc(src){\n\t\treturn this.rootGroup._getSampleDescendantsBySource(src);\n\t}\n\n\n\t/**\n\t * Register multiple sounds at once. TODO: expected args?\n\t * @param sounds\n\t */\n\tstatic registerSounds(sounds) {\n\t\tsounds.forEach( s => Sound.registerSound(s) )\n\t}\n\n\t/**\n\t * Remove multiple sounds registered by either Sound.play or Sound.registerSound. Takes the same type of argument as\n\t * removeSound (aka an ID), but as an array, for multiple removals at once.\n\t * @param sounds\n\t */\n\tstatic removeSounds(sounds) {\n\t\tsounds.forEach( s => Sound.removeSound(s)  );\n\t}\n\n\tstatic removeAllSounds() {\n\t\tSound.purgeSamples();\n\t}\n\n\n\t/********************\n\t * TODO: This requestBuffer function is the last thing I was working on, and it's very unfinished and untested. There's\n\t * also duplicates of this code in Sample that will be defunct if/when this works.\n\t *\n\t * Possible improvement planned: For Data URLs, don't store the Data URL as a string, just decode the buffer each time\n\t * and compare against that e.g. as if you had been provided an audio buffer\n\t *\n\t * This should also be chopped up into separate functions when it's confirmed working to clean up some of this mess\n\t */\n\n\tstatic requestBuffer(data, sample){\n\n\t\t// ID reservation must be synchronous - other requests may be made for the same buffer before the promise resolves,\n\t\t// even if the audio is already loaded.\n\t\tlet id = Sound._reserveId(data);\n\n\t\tif(!id){\n\t\t\treturn null; // Will likely cause errors as functions calling this will be expecting a promise,\n\t\t\t\t\t\t\t\t\t\t// but we're already in an error state if the reserved id was null. May improve later.\n\t\t}\n\n\t\tif(Sound._audioBuffers[id] instanceof Promise){\n\t\t\t// This buffer has already been requested. Return that promise.\n\t\t\tconsole.log(\"Already loading - we have a promise. returning\");\n\t\t\treturn Sound._audioBuffers[id];\n\t\t}\n\n\t\tif(Sound._audioBuffers[id] instanceof AudioBuffer){\n\t\t\tconsole.log(\"buffer already exists - returning\");\n\t\t\treturn new Promise( (resolve, reject) => { resolve({audioBuffer: Sound._audioBuffers[id], bufferId: id}); } );\n\t\t}\n\n\t\t// We have an ID, but we don't already have a pending promise for the buffer, so kick off the load/decode:\n\n\t\tlet pr = new Promise( (resolve, reject) => {\n\n\t\t\tif(Sound._audioBuffers[id] instanceof AudioBuffer){\n\t\t\t\t// We already have this buffer. Resolve immediately:\n\t\t\t\tconsole.log(\"AudioBuffer already in list\");\n\t\t\t\tresolve({audioBuffer: Sound._audioBuffers[id], bufferId: id});  // incorrect\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Don't have this buffer yet - load and decode, then store it off for future use and resolve:\n\n\t\t\tif(data instanceof ArrayBuffer){\n\t\t\t\tSound._fetchByArrayBuffer(data, id, resolve, reject);\n\t\t\t\tconsole.log(\"Fetching by array buffer\");\n\n\t\t\t}else if(data instanceof AudioBuffer){\n\t\t\t\tSound._fetchByAudioBuffer(data, id, resolve, reject);\n\t\t\t\tconsole.log(\"Fetching by audio buffer\");\n\n\t\t\t}else if (typeof data === \"string\"){\n\t\t\t\tSound._fetchByString(data, id, resolve, reject);\n\t\t\t\tconsole.log(\"Fetching by string\");\n\n\t\t\t} else if (data instanceof Array) {\n\t\t\t\tSound._fetchByUrlArray(data, id, resolve, reject);\n\t\t\t\tconsole.log(\"Fetching by url array\");\n\n\t\t\t} else if (typeof data === \"object\") {\n\t\t\t\tSound._fetchByUrlHash(data, id, resolve, reject);\n\t\t\t\tconsole.log(\"Fetching by url hash\");\n\n\t\t\t}\n\t\t});\n\n\t\t// Now store off the promise so that other people requesting the same buffer get the same promise, and return\n\n\t\tif(!(Sound._audioBuffers[id] instanceof AudioBuffer)){\n\t\t\t// Need to check if the AudioBuffer already is in place. The above promise may resolve synchronously sometimes,\n\t\t\t// so it may have already placed an already-loaded AudioBuffer into the top level hash.\n\t\t\tconsole.log(\"storing promise\");\n\t\t\tSound._audioBuffers[id] = pr;\n\t\t}\n\t\treturn pr;\n\t}\n\n\tstatic _reserveId(data){\n\t\tif(data instanceof ArrayBuffer){\n\t\t\tdata.soundJsId = data.soundJsId || \"ab_\" + Sound._arrayBufferIdSuffix++;\n\t\t\treturn data.soundJsId;\n\n\t\t}else if(data instanceof AudioBuffer){\n\t\t\tdata.soundJsId = data.soundJsId || \"audioBuffer_\" + Sound._audioBufferIdSuffix++;\n\t\t\treturn data.soundJsId;\n\n\t\t}else if (typeof data === \"string\"){\n\t\t\treturn data;\n\n\t\t} else if (data instanceof Array) {\n\t\t\treturn this._reserveIdFromUrlArray(data);\n\n\t\t} else if (typeof data === \"object\") {\n\t\t\treturn this._reserveIdFromUrlHash(data);\n\n\t\t}\n\t};\n\n\tstatic _reserveIdFromUrlArray(arr){\n\t\tfor (let i = 0; i < arr.length; i++) {\n\t\t\tlet url = arr[i];\n\t\t\tif (Sound.isExtensionSupported(url, false)) {\n\t\t\t\treturn url;\n\t\t\t}\n\t\t}\n\t\tconsole.warn(\"Warning: Attempted to create an audiobuffer from a url array, but didn't find any supported file types. Requested urls were:\");\n\t\tconsole.log(arr);\n\t\treturn null;\n\t}\n\n\tstatic _reserveIdFromUrlHash(o){\n\t\t// Assume a source of the format: {<ext>:<url>} e.g. {mp3: path/to/file/sound.mp3, ogg: other/path/soundFileWithNoExtension}\n\t\tfor (let ext in o) {\n\t\t\tif ( o.hasOwnProperty(ext) && Sound.isExtensionSupported(ext, false) ) {\n\t\t\t\treturn o[ext];\n\t\t\t}\n\t\t}\n\t\tconsole.error(\"Warning: Attempted to create an audiobuffer from a url hash, but didn't find any supported file types. Requested urls were:\");\n\t\tconsole.log(o);\n\t\treturn null;\n\t}\n\n\tstatic _fetchByArrayBuffer(buffer, id, resolve, reject){\n\t\tSound.decodeArrayBuffer(buffer).then( (audioBuffer) => {\n\t\t\tSound._audioBuffers[id] = audioBuffer;\n\t\t\tresolve({audioBuffer: audioBuffer, bufferId: id});\n\t\t});\n\t}\n\n\tstatic _fetchByAudioBuffer( buffer, id, resolve, reject){\n\t\tSound._audioBuffers[id] = buffer;\n\t\tresolve({audioBuffer: buffer, bufferId: id});\n\t}\n\n\tstatic _fetchByString(data, id, resolve, reject){\n\t\tconsole.log(\"found string url\");\n\n\t\tlet ab = Sound._audioBuffers[id];\n\n\t\tif(ab){\n\t\t\tresolve({audioBuffer: ab, bufferId: id}); // TODO: this check is duplicated in the individual cases, so remove at least one\n\t\t\treturn;\n\t\t}\n\n\t\t// Buffer not found. Load and decode.\n\t\tif (/^data:.*?,/.test(data)) { // Test for Data URL\n\t\t\tconsole.log(\"found data url\");\n\t\t\tlet ab = Sound._audioBuffers[id];\n\t\t\tif(ab instanceof AudioBuffer){\n\t\t\t\tresolve({audioBuffer: ab, bufferId: data});// TODO: Improve so we're not storing data URLs on Samples.\n\t\t\t}else{\n\t\t\t\t// Data URLs can just be loaded by XHR, so do so\n\t\t\t\tSound.loadAndDecodeAudio(data).then( (audioBuffer) => {\n\t\t\t\t\tSound._audioBuffers[id] = audioBuffer;\n\t\t\t\t\tresolve({audioBuffer: audioBuffer, bufferId: data})} ); // TODO: Improve so we're not storing data URLs on Samples.\n\t\t\t}\n\n\t\t} else {\n\t\t\t// Assumed to be a regular url at this point\n\t\t\tlet src = Sound.ensureValidFileExtension(data);\n\t\t\tconsole.log(\"found regular string url\");\n\t\t\t// Checks to see if we might have stored a buffer with this URL (after possibly changing the file extension):\n\t\t\tlet ab = Sound._audioBuffers[src];\n\t\t\tif(ab instanceof AudioBuffer){\n\t\t\t\tresolve({audioBuffer: ab, bufferId: src})\n\t\t\t}else{\n\t\t\t\tSound.loadAndDecodeAudio(src).then ( (audioBuffer) => {\n\t\t\t\t\tSound._audioBuffers[id] = audioBuffer;\n\t\t\t\t\tresolve({audioBuffer: audioBuffer, bufferId: id})\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic _fetchByUrlArray(arr, id, resolve, reject){\n\t\tlet ab = Sound._audioBuffers[id];\n\t\tif(ab instanceof AudioBuffer) {\n\t\t\tresolve({audioBuffer: ab, bufferId: id});\n\t\t}\n\n\t\tfor (let i = 0; i < arr.length; i++) {\n\t\t\tlet url = arr[i];\n\t\t\tif (!Sound.isExtensionSupported(url, false)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlet ab = Sound._audioBuffers[id];\n\t\t\tif(ab instanceof AudioBuffer){\n\t\t\t\tresolve({audioBuffer: ab, bufferId: id});\n\t\t\t}else{\n\t\t\t\tSound.loadAndDecodeAudio(url).then ( (audioBuffer) => {\n\t\t\t\t\tSound._audioBuffers[id] = audioBuffer;\n\t\t\t\t\tresolve({audioBuffer: audioBuffer, bufferId: id})\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn; // We found the first (and thus highest priority) workable extension, and don't need to keep looking\n\t\t}\n\t\treject(\"No supported files types found in URL array\");\n\t}\n\n\tstatic _fetchByUrlHash(hash, id, resolve, reject){\n\t\t// Assume a source of the format: {<ext>:<url>} e.g. {mp3: path/to/file/sound.mp3, ogg: other/path/soundFileWithNoExtension}\n\t\tfor (let ext in data) {\n\t\t\tif (!data.hasOwnProperty(ext) || !Sound.isExtensionSupported(ext, false) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t//this.src = src[ext];\n\t\t\tlet ab = Sound._audioBuffers[id]; // TODO cleanup, move out of loop\n\t\t\tif(ab instanceof AudioBuffer){\n\t\t\t\tresolve({audioBuffer: ab, bufferId: data[ext]});\n\t\t\t}else{\n\t\t\t\tSound.loadAndDecodeAudio(data[ext]).then ( (audioBuffer) => {\n\t\t\t\t\tSound._audioBuffers[id] = audioBuffer;\n\t\t\t\t\tresolve({audioBuffer: audioBuffer, bufferId: id})\n\t\t\t\t});\n\t\t\t}\n\t\t\tbreak; // We only need one valid url\n\t\t}\n\t}\n\n\tstatic loadAndDecodeAudio(src){\n\t\treturn new Promise( (resolve, reject) => {\n\t\t\tSound.loadAudio(src).then( (arrayBuffer) => {\n\t\t\t\tSound.decodeArrayBuffer(arrayBuffer).then ( (audioBuffer) => resolve(audioBuffer))\n\t\t\t})\n\t\t});\n\t}\n\n\tstatic loadAudio(src){\n\t\treturn new Promise( (resolve, reject) => {\n\t\t\tlet request = new XMLHttpRequest();\n\t\t\trequest.open('GET', src, true);\n\t\t\trequest.responseType = 'arraybuffer';\n\t\t\trequest.onload = (loadEvent) => {\n\t\t\t\tlet xhr = loadEvent.target;\n\t\t\t\tif(xhr.readyState === 4 && xhr.status === 200){\n\t\t\t\t\tlet result = xhr.response;\n\t\t\t\t\tresolve(result);\n\t\t\t\t}else{\n\t\t\t\t\treject(loadEvent);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\trequest.send();\n\t\t});\n\t}\n\n\tstatic decodeArrayBuffer(arrayBuffer){\n\t\treturn new Promise( (resolve, reject) => {\n\t\t\tSound.context.decodeAudioData(arrayBuffer,\n\t\t\t\t(result) => { // Success\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\t\t\t\t,\n\t\t\t\t(error) => { // Error\n\t\t\t\t\treject(error);\n\t\t\t\t});\n\t\t});\n\t}\n\n\tstatic ensureValidFileExtension(url) {\n\t\t// Not a data URL, so let's doublecheck the file extension before loading.\n\t\tlet extensionExp = /\\.\\w+$/;\n\t\tlet result = extensionExp.exec(url);\n\t\tif (result === null) {\n\t\t\t// No file extension, so add one\n\t\t\turl = url.concat(\".\" + Sound.fallbackFileExtension);\n\t\t} else {\n\t\t\t// Found a file extension. Check if it's supported. If it's definitely not, fall back.\n\t\t\tlet extension = result[0].substr(1);\n\t\t\tif (!Sound.isExtensionSupported(extension, false)) {\n\t\t\t\turl = url.replace(extensionExp, \".\" + Sound.fallbackFileExtension);\n\t\t\t}\n\t\t}\n\t\treturn url;\n\t}\n\n/*\n\thandleAudioLoaded(loadEvent) {\n\t\tlet xhr = loadEvent.target;\n\t\tif(xhr.readyState === 4 && xhr.status === 200){\n\t\t\tlet ctx = Sound.context;\n\t\t\tlet result = loadEvent.target.response;\n\t\t\tctx.decodeAudioData(result, this.handleAudioDecoded.bind(this), this.handleAudioDecodeError.bind(this));\n\t\t}\n\t}\n\n\thandleAudioDecoded(buffer) {\n\t\tthis.audioBuffer = buffer;\n\n\t\tthis.dispatchEvent(\"ready\");\n\n\t\tif (this._playbackRequested) {\n\t\t\tthis._play(this._requestedPlaybackPlayprops);\n\t\t}\n\t}\n\n\thandleAudioDecodeError(e) {\n\t\tconsole.warn(\"Error decoding audio data in Sample.\")\n\t}*/\n\n\tstatic releaseBuffer(id, sample){\n\n\t}\n}\n\nSound._initialize();\n\nexport default Sound;\n","import EventDispatcher from \"@createjs/core/src/events/EventDispatcher\";\nimport Sound from \"../Sound\";\n\nexport default class Declicker extends EventDispatcher {\n\n\tget isFadingIn(){\n\t\treturn this.isFading && this._fadingIn === true;\n\t}\n\n\tget isFadingOut(){\n\t\treturn this.isFading && this._fadingIn === false;\n\t}\n\n\tget isFading(){\n\t\treturn !!this.fadeMaskTimeout;\n\t}\n\n\tconstructor(gainNode){\n\t\tsuper();\n\n\t\t// The node we will use for fading to prevent clicks. Use provided node if exists, otherwise create one.\n\t\tthis.gainNode = this.inputNode = this.outputNode = gainNode || Sound.context.createGain();\n\n\t\tthis.fadeMaskDuration = 0.02; // Duration of the fade, in seconds.\n\t\tthis.fadeMaskTimeout = null;  // Reference to the timeout for calling an event, to allow cancelling\n\t\tthis._fadingIn = null;\n\t}\n\n\tfadeOut(){\n\t\tif(this.fadeMaskTimeout){\n\t\t\treturn; // Do nothing if we're already fading.\n\t\t}\n\t\tthis.gainNode.gain.value = 1;\n\t\tthis.gainNode.gain.linearRampToValueAtTime(0, Sound.context.currentTime + this.fadeMaskDuration);\n\t\tthis._fadingIn = false;\n\n\t\tthis.fadeMaskTimeout = window.setTimeout( () => {\n\t\t\tthis.dispatchEvent(\"fadeOutComplete\");\n\t\t\tthis.fadeMaskTimeout = null;\n\t\t\tthis._fadingIn = null;\n\t\t}, (this.fadeMaskDuration * 1100) | 0);\n\n\t}\n\n\tfadeIn(){\n\t\tif(this.fadeMaskTimeout){\n\t\t\treturn; // Do nothing if we're already fading.\n\t\t}\n\n\t\tthis.gainNode.gain.value = 0;\n\t\tthis.gainNode.gain.linearRampToValueAtTime(1, Sound.context.currentTime + this.fadeMaskDuration);\n\t\tthis._fadingIn = true;\n\n\t\tthis.fadeMaskTimeout = window.setTimeout( () => {\n\t\t\tthis.dispatchEvent(\"fadeInComplete\");\n\t\t\tthis.fadeMaskTimeout = null;\n\t\t\tthis._fadingIn = null;\n\t\t}, (this.fadeMaskDuration * 1100) | 0);\n\t}\n\n\tcancelFade(){\n\t\tif(!this.fadeMaskTimeout){\n\t\t\treturn; // Not currently fading; do nothing.\n\t\t}\n\n\t\tthis.gainNode.gain.cancelScheduledValues(Sound.context.currentTime);\n\t\tthis.gainNode.gain.value = 1;\n\t\twindow.clearTimeout(this.fadeMaskTimeout);\n\t\tthis.fadeMaskTimeout = null;\n\t\tthis._fadingIn = null;\n\t}\n\n\n}\n","import Sound from \"./Sound\";\nimport Declicker from \"./utils/Declicker\"\nimport AbstractAudioWrapper from \"./AbstractAudioWrapper\";\n\nclass Playback extends AbstractAudioWrapper {\n\n\tget elapsed() {\n\t\tlet ctx = Sound.context;\n\t\tif(this._paused){\n\t\t\treturn this._positionOffset - this.offset - this._remainingDelay;\n\t\t}else{\n\t\t\treturn ctx.currentTime - this._startTime + this._positionOffset - this.offset;\n\t\t}\n\t}\n\n\tget position(){\n\t\tlet ctx = Sound.context;\n\t\tif(this._paused){\n\t\t\treturn this._positionOffset;\n\t\t}else{\n\t\t\tif(this.elapsed < 0){\n\t\t\t\t// If we're counting down during a delay, show where we'll start playing.\n\t\t\t\treturn this.offset;\n\t\t\t}else{\n\t\t\t\treturn ctx.currentTime - this._startTime + this._positionOffset;\n\t\t\t}\n\t\t}\n\t}\n\n\tget duration() {\n\t\treturn this.buffer.duration;\n\t}\n\n\tget playing() {\n\t\treturn Boolean(this._sourceNode) && !this.paused && !this._stopping;\n\t}\n\n\tset paused(val){\n\t\tif(val){\n\t\t\tthis.pause();\n\t\t}else{\n\t\t\tthis.resume();\n\t\t}\n\t}\n\n\tget paused() {\n\t\treturn this._pausing || this._paused;\n\t}\n\n\tconstructor(audioBuffer, options = {}) {\n\t\tsuper();\n\t\tlet ctx = Sound.context;\n\n\t\tthis.fademaskerNode = ctx.createGain();\n\t\tthis.fademaskerNode.connect(this.fxBus);\n\n\t\tthis.declicker = new Declicker(this.fademaskerNode);\n\t\tthis.declicker.on(\"fadeOutComplete\", this.handleFadeMaskComplete, this);\n\t\t// Currently no need to listen to the fade-in complete.\n\n\t\t// Internal playback data tracking\n\t\tthis.buffer = audioBuffer;\n\t\tthis._startTime = null;\n\t\tthis._positionOffset = 0; // Progress offset. Essentially, 'where will this start playing again if we resume', but also used in calculations while a sound is playing.\n\t\tthis._remainingDelay = 0; // If paused during a delay, this tracks how much delay is left when resumed.\n\t\tthis._paused   = false;\n\t\tthis._pausing  = false;\n\t\tthis._stopping = false;\n\n\t\t// Play properties\n\n\t\tlet loops = Number(options.loops);\n\t\tthis.remainingLoops = loops ? Math.max(loops | 0, -1) : 0;\n\n\t\tthis.delay   = isNaN(Number(options.delay )) ? 0 : Number(options.delay);\t\t\t// 0 default\n\t\tthis.offset  = isNaN(Number(options.offset)) ? 0 : Number(options.offset);\t\t// 0 default\n\t\tthis.playDuration = options.playDuration;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// No default needed, undefined and null are both valid values\n\n\t\tthis._play(this.delay, this.offset, this.playDuration);\n\t}\n\n\t// duration now defaults to buffer duration - iOS/Safari throws a dom exception 11 if a source node is told to start with undefined duration.\n\t_play(delay = 0, offset = 0, duration = this.buffer.duration) {\n\t\tlet ctx = Sound.context;\n\n\t\tif (this._sourceNode) {\n\t\t\treturn; // Do nothing - sound is already playing. Playing multiple sounds should be done by playing the sample again.\n\t\t}\n\n\t\tif(duration === null){\n\t\t\tduration = this.buffer.duration; // Makes a null value result in 'play until the end of the buffer' instead of 0 play duration.\n\t\t}\n\n\t\tthis.fademaskerNode.gain.value = 0;\n\t\tthis._sourceNode || this._createSourceNode();\n\t\tthis._sourceNode.start(ctx.currentTime + delay, offset, duration);\n\t\tthis.declicker.fadeIn();\n\n\t\tthis._startTime = ctx.currentTime + delay;\n\t\tthis._positionOffset = offset;\n\t\tthis._paused = false;\n\t}\n\n\t_createSourceNode() {\n\t\tlet ctx = Sound.context;\n\n\t\tthis._sourceNode = ctx.createBufferSource();\n\t\tthis._sourceNode.buffer = this.buffer;\n\t\tthis._sourceNode.connect(this.fademaskerNode);\n\n\t\tthis._sourceNode.onended = this.handleEnded.bind(this);\n\t}\n\n\tloop() {\n\t\tthis._sourceNode = null;\n\t\tthis._play(0, this.offset, this.playDuration);\n\t\tif (this.remainingLoops > 0) {\n\t\t\tthis.remainingLoops--;\n\t\t}\n\t}\n\n\tpause() {\n\t\tif (!this.playing) { // This checks for paused, pausing, stopping and stopped.\n\t\t\treturn;\n\t\t}\n\n\t\tif(this.declicker.isFadingIn){\n\t\t\t// We're okay cancelling a fade-in to pause.\n\t\t\tthis.declicker.cancelFade();\n\t\t}\n\n\t\tthis.dispatchEvent(\"paused\");\n\t\tthis._pausing = true;\n\t\tthis.declicker.fadeOut();\n\t}\n\n\tresume() {\n\t\tif(this._stopping){\n\t\t\t// Do nothing - interrupting a stop is not allowed.\n\t\t}else if(this._paused){\n\t\t\tthis._play(this._remainingDelay, this._positionOffset);\n\t\t\tthis._paused = false;\n\t\t}else if(this._pausing){\n\t\t\tthis.declicker.cancelFade();\n\t\t\tthis._pausing = false;\n\t\t}\n\n\t\t// Implicitly does nothing if the sound is neither paused nor pausing.\n\t}\n\n\t_pauseCore() {\n\t\tthis._positionOffset = this.position;\n\t\tif(this.elapsed < 0){\n\t\t\tthis._remainingDelay = -this.elapsed;\n\t\t}else{\n\t\t\tthis._remainingDelay = 0;\n\t\t}\n\n\t\tthis._sourceNode.stop();\n\t\tthis._sourceNode = null;\n\t\tthis._pausing = false;\n\t\tthis._paused = true;\n\t}\n\n\tstop() {\n\t\tif (this._stopping) { // Already stopping - don't need to stop again.\n\t\t\treturn;\n\t\t}\n\n\t\tif(this._paused){\n\t\t\tthis._stopCore(); // Not playing currently - can stop immediately.\n\t\t\tthis.dispatchEvent(\"stopped\");\n\t\t\treturn;\n\t\t}\n\n\t\tthis.dispatchEvent(\"stopped\");\n\t\tthis._stopping = true;\n\t\tthis.declicker.fadeOut();\n\t}\n\n\t_stopCore() {\n\t\t// after the declick fade, do the actual stopping part.\n\t\tthis._stopping = false;\n\t\tthis.destroy(); // An \"end\" event will be dispatched in response to the _sourceNode being told to stop in the destroy function, so is not needed here.\n\t}\n\n\tdestroy() {\n\t\tif (this._sourceNode) {\n\t\t\tthis._sourceNode.onended = null; // Stop listening before stopping the node, since the listener does things we don't want for a destroyed sound\n\t\t\tthis._sourceNode && this._sourceNode.stop();\n\t\t}\n\t\tthis.dispatchEvent(\"end\"); // Manually dispatch the end event since the listener has been removed\n\t\tthis._sourceNode = null;\n\t\tthis._paused = false;\n\t\tthis.dispatchEvent(\"destroyed\");\n\t\t// TODO: review approach for preventing future plays.\n\t\tthis._play = () => {\n\t\t\tthrow new Error(\"Cannot play Playback after it has been destroyed.\")\n\t\t};\n\t\tthis.removeAllEventListeners();\n\t\tthis.declicker.removeAllEventListeners();\n\t}\n\n\thandleEnded() {\n\t\tif (this.paused) {\n\t\t\t// Do nothing - the buffer just sent an ended event, but this is because the Playback was just paused,\n\t\t\t// and the pause function already dispatched a pause event.\n\t\t} else {\n\t\t\t// Reached end of playback. Loop if we have remaining loops - destroy otherwise.\n\n\t\t\tif (this.remainingLoops !== 0) {\n\t\t\t\tthis.dispatchEvent(\"end\");\n\t\t\t\tthis.loop();\n\t\t\t} else {\n\t\t\t\t// No event here - the destroy function dispatches an end event.\n\t\t\t\tthis.destroy();\n\t\t\t}\n\t\t}\n\t}\n\n\thandleFadeMaskComplete(){\n\t\tif(this._stopping){\n\t\t\tthis._stopCore();\n\t\t}else if(this._pausing) {\n\t\t\tthis._pauseCore();\n\t\t}\n\t}\n\n}\n\nexport default Playback;\n","import Sound from \"../Sound\"\n\nexport default class Effect {\n\tconstructor(){\n\n\t\t// Set up the filter's internal audio graph here. At minimum, all filters need an input node and an output node\n\t\t// (though these can be the same node) for attaching and detaching.\n\n\t\tthis.inputNode = Sound.context.createGain(); // The node external sources will connect to\n\t\tthis.effectBus = Sound.context.createGain(); // The node that connects up to the effects chain.\n\t\tthis.outputNode = Sound.context.createGain();// The node that will connect to external destinations\n\t\tthis.dryGain = Sound.context.createGain();\t\t// The amount of dry signal included in the output\n\t\tthis.wetGain = Sound.context.createGain();   // The amount of wet signal included in the output\n\n\t\tthis.inputNode.connect(this.effectBus);\n\t\tthis.inputNode.connect(this.dryGain);\n\n\t\tthis.wetGain.connect(this.outputNode);\n\t\tthis.dryGain.connect(this.outputNode);\n\n\t\tthis.dryGain.gain.value = 0;\n\n\t\tthis._enabled = true;\n\t\tthis.owner = null; // The Sample, Playback or Group that owns this effect - used for checking when adding an effect to prevent being added to multiple locations\n\t}\n\n\t/**\n\t * Attaches this effect to a destination WebAudio node. This function should generally serve as a wrapper for the\n\t * outputNode's connect, but gives a chance for an Effect to perform some setup when it's connected to a new node.\n\t * @param destination\n\t */\n\tconnect(destination){\n\t\tif(destination && destination.inputNode){\n\t\t\t// This is another effect or similar, so connect up to the input node instead of trying to connect to it directly\n\t\t\tdestination = destination.inputNode;\n\t\t}\n\t\tthis.outputNode.connect(destination);\n\t}\n\n\t/**\n\t * Disconnects this from its output. Like attach, this function is a wrapper for the outputnode's disconnect,\n\t * and gives a chance for an Effect to perform any cleanup when it's disconnected.\n\t */\n\tdisconnect(destination){\n\t\tif(destination && destination.inputNode){\n\t\t\t// If this destination has an input node, that's what we want to disconnect from, rather than the object itself.\n\t\t\tdestination = destination.inputNode;\n\t\t}\n\t\tthis.outputNode.disconnect(destination);\n\t}\n\n\tdisable(){\n\t\tif(!this._enabled){\n\t\t\treturn; // do nothing, already disabled.\n\t\t}\n\n\t\tthis.inputNode.disconnect(this.effectBus);\n\t\tthis.inputNode.disconnect(this.dryGain);\n\t\tthis.inputNode.connect(this.outputNode);\n\t\tthis._enabled = false;\n\t}\n\n\tenable(){\n\t\tif(this._enabled){\n\t\t\treturn // do nothing, already enabled.\n\t\t}\n\n\t\tthis.inputNode.disconnect(this.outputNode);\n\t\tthis.inputNode.connect(this.effectBus);\n\t\tthis.inputNode.connect(this.dryGain);\n\t\tthis._enabled = true;\n\t}\n}\n","import Sound from \"../Sound\"\nimport Effect from \"./Effect\"\n\nexport default class LowPassFilter extends Effect {\n\n\tset Q(val){\n\t\tthis.filterNode.Q.value = val;\n\t}\n\n\tget Q(){\n\t\treturn this.filterNode.Q.value;\n\t}\n\n\tset frequency(val){\n\t\tthis.filterNode.frequency.value = val;\n\t}\n\n\tget frequency(){\n\t\treturn this.filterNode.frequency.value;\n\t}\n\n\tconstructor(cutoffFrequency = 2000, Q = 1){\n\t\tsuper();\n\n\t\tthis.filterNode = Sound.context.createBiquadFilter();\n\n\t\tthis.filterNode.type = \"lowpass\";\n\t\tthis.frequency = cutoffFrequency;\n\t\tthis.Q = Q;\n\n\t\tthis.effectBus.connect(this.filterNode);\n\t\tthis.filterNode.connect(this.wetGain);\n\t}\n\n\n}\n","import Sound from \"../Sound\"\nimport Effect from \"./Effect\"\n\nexport default class HighPassFilter extends Effect {\n\n\tset Q(val){\n\t\tthis.filterNode.Q.value = val;\n\t}\n\n\tget Q(){\n\t\treturn this.filterNode.Q.value;\n\t}\n\n\tset frequency(val){\n\t\tthis.filterNode.frequency.value = val;\n\t}\n\n\tget frequency(){\n\t\treturn this.filterNode.frequency.value;\n\t}\n\n\tconstructor(cutoffFrequency = 1000, Q = 1){\n\t\tsuper();\n\n\t\tthis.filterNode = Sound.context.createBiquadFilter();\n\n\t\tthis.filterNode.type = \"highpass\";\n\t\tthis.frequency = cutoffFrequency;\n\t\tthis.Q = Q;\n\n\t\tthis.effectBus.connect(this.filterNode);\n\t\tthis.filterNode.connect(this.wetGain);\n\t}\n\n\n}\n","import Sound from \"../Sound\"\nimport Effect from \"./Effect\"\n\nexport default class BiquadFilter extends Effect {\n\n\tstatic _initialize(){\n\t\t// Filter types.\n\t\t\tBiquadFilter.HIGHPASS = \"highpass\";\n\t\t\tBiquadFilter.LOWPASS = \"lowpass\";\n\t\t\tBiquadFilter.BANDPASS = \"bandpass\";\n\t\t\tBiquadFilter.LOWSHELF = \"lowshelf\";\n\t\t\tBiquadFilter.HIGHSHELF = \"highshelf\";\n\t\t\tBiquadFilter.PEAKING = \"peaking\";\n\t\t\tBiquadFilter.NOTCH = \"notch\";\n\t\t\tBiquadFilter.ALLPASS = \"allpass\";\n\t}\n\n\tset type(val){\n\t\tthis.filterNode.type = val;\n\t}\n\n\tget type(){\n\t\treturn this.filterNode.type;\n\t}\n\n\tset Q(val){\n\t\tthis.filterNode.Q.value = val;\n\t}\n\n\tget Q(){\n\t\treturn this.filterNode.Q.value;\n\t}\n\n\tset frequency(val){\n\t\tthis.filterNode.frequency.value = val;\n\t}\n\n\tget frequency(){\n\t\treturn this.filterNode.frequency.value;\n\t}\n\n\tset gain(val){\n\t\tthis.filterNode.gain.value = val;\n\t}\n\n\tget gain(){\n\t\treturn this.filterNode.gain.value;\n\t}\n\n\tset detune(val){\n\t\tthis.filterNode.detune.value = val;\n\t}\n\n\tget detune(){\n\t\treturn this.filterNode.detune.value;\n\t}\n\n\tconstructor(type = \"lowpass\", frequency = 1500, Q = 1, gain = 0, detune = 0){\n\t\tsuper();\n\n\t\tthis.filterNode = Sound.context.createBiquadFilter();\n\n\t\tthis.filterNode.type = type;\n\t\tthis.frequency = frequency;\n\t\tthis.Q = Q;\n\t\tthis.gain = gain;\n\t\tthis.detune = detune;\n\n\t\tthis.effectBus.connect(this.filterNode);\n\t\tthis.filterNode.connect(this.wetGain);\n\t}\n}\n\nBiquadFilter._initialize();\n","/**\n * The Sound JavaScript library manages the playback of audio on the web. It works via plugins which abstract the actual audio\n * implementation, so playback is possible on any platform without specific knowledge of what mechanisms are necessary\n * to play sounds.\n *\n * To use SoundJS, use the public API on the {{#crossLink \"Sound\"}}{{/crossLink}} class. This API is for:\n * <ul>\n *      <li>Installing audio playback Plugins</li>\n *      <li>Registering (and preloading) sounds</li>\n *      <li>Creating and playing sounds</li>\n *      <li>Master volume, mute, and stop controls for all sounds at once</li>\n * </ul>\n *\n * <b>Controlling Sounds</b><br />\n * Playing sounds creates {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} instances, which can be controlled\n * individually.\n * <ul>\n *      <li>Pause, resume, seek, and stop sounds</li>\n *      <li>Control a sound's volume, mute, and pan</li>\n *      <li>Listen for events on sound instances to get notified when they finish, loop, or fail</li>\n * </ul>\n *\n * <h4>Example</h4>\n *\n *      createjs.Sound.alternateExtensions = [\"mp3\"];\n *      createjs.Sound.on(\"fileload\", this.loadHandler, this);\n *      createjs.Sound.registerSound(\"path/to/mySound.ogg\", \"sound\");\n *      function loadHandler(event) {\n *          // This is fired for each sound that is registered.\n *          var instance = createjs.Sound.play(\"sound\");  // play using id.  Could also use full sourcepath or event.src.\n *          instance.on(\"complete\", this.handleComplete, this);\n *          instance.volume = 0.5;\n *      }\n *\n * <h4>Browser Support</h4>\n * Audio will work in browsers which support Web Audio (<a href=\"http://caniuse.com/audio-api\" target=\"_blank\">http://caniuse.com/audio-api</a>)\n * or HTMLAudioElement (<a href=\"http://caniuse.com/audio\" target=\"_blank\">http://caniuse.com/audio</a>).\n * A Flash fallback can be used for any browser that supports the Flash player, and the Cordova plugin can be used in\n * any webview that supports <a href=\"http://plugins.cordova.io/#/package/org.apache.cordova.media\" target=\"_blank\">Cordova.Media</a>.\n * IE8 and earlier are not supported, even with the Flash fallback. To support earlier browsers, you can use an older\n * version of SoundJS (version 0.5.2 and earlier).\n *\n */\n\n// sound\nexport {default as Playback} from \"./Playback\";\nexport {default as Sample} from \"./Sample\";\nexport {default as Group} from \"./Group\";\nexport {default as Sound} from \"./Sound\";\n//effects\nimport Effect from \"./effects/Effect\"\nimport LowPassFilter from \"./effects/LowPassFilter\"\nimport HighPassFilter from \"./effects/HighPassFilter\"\nimport BiquadFilter from \"./effects/BiquadFilter\"\nconst FX = {Effect, LowPassFilter, HighPassFilter, BiquadFilter};\nexport { FX };\n\n"],"names":["Event","type","bubbles","cancelable","target","currentTarget","eventPhase","timeStamp","Date","getTime","defaultPrevented","propagationStopped","immediatePropagationStopped","removed","preventDefault","stopPropagation","stopImmediatePropagation","remove","clone","event","n","hasOwnProperty","set","props","toString","constructor","name","EventDispatcher","initialize","p","prototype","addEventListener","on","removeEventListener","off","removeAllEventListeners","hasEventListener","dispatchEvent","_dispatchEvent","willTrigger","_listeners","_captureListeners","listener","useCapture","listeners","arr","push","scope","once","data","handleEvent","evt","call","l","length","i","splice","eventObj","e","parent","top","list","captureListeners","o","slice","AbstractAudioWrapper","val","volumeNode","gain","value","panNode","setPosition","pan","mute","unmute","_muted","ctx","Sound","context","outputNode","createGain","postFxNode","createPanner","connect","muterNode","fxBus","_effects","muted","disconnect","addEffect","effect","effects","concat","getEffects","cloneEffects","removeAllEffects","owner","Error","firstEffect","inputNode","j","Sample","playbacks","elapsed","position","pause","resume","paused","_loops","audioBuffer","duration","src","options","rootGroup","_playbackRequested","volume","isNaN","Number","loops","Math","max","delay","offset","playDuration","requestBuffer","then","result","bufferId","handleAudioDecoded","add","_resolveSource","ArrayBuffer","decodeAudioData","bind","handleAudioDecodeError","AudioBuffer","test","loadAudio","_ensureValidFileExtension","Array","u","isExtensionSupported","ext","url","extensionExp","exec","fallbackFileExtension","extension","substr","replace","interrupt","play","playProps","_requestedPlaybackPlayprops","_play","pb","Playback","handlePlaybackEnd","handlePlaybackStopped","handlePlaybackDestroyed","forEach","stop","request","XMLHttpRequest","open","responseType","onload","handleAudioLoaded","send","destroy","loadEvent","xhr","readyState","status","response","ab","buffer","console","warn","index","indexOf","makePlayPropsObj","consumePlayPropsObj","undefined","Group","samples","subgroups","groupOrSample","_addGroup","_addSample","subgroup","_remove","sample","handleSampleDestroyed","_removeGroup","_removeSample","s","g","log","_getSampleDescendantsBySource","out","Set","sub","from","_getAllSampleDescendants","_initialize","soundContextClass","window","AudioContext","webkitAudioContext","__context","__rootGroup","destination","__fileExtensionPriorityList","_strictFallbacks","_idHash","_arrayBufferIdSuffix","_audioBufferIdSuffix","_audioBuffers","registerSound","sampleData","id","defaultPlayProps","_generateRegistrationId","sampleOrSource","removeSound","idOrSrc","registered","pathOrExtension","strict","match","document","createElement","canPlayType","purgeSamples","urlOrId","sampleOrGroup","getSampleBySrc","getSamplesBySrc","registerSounds","sounds","removeSounds","removeAllSounds","_reserveId","Promise","resolve","reject","pr","_fetchByArrayBuffer","_fetchByAudioBuffer","_fetchByString","_fetchByUrlArray","_fetchByUrlHash","soundJsId","_reserveIdFromUrlArray","_reserveIdFromUrlHash","error","decodeArrayBuffer","loadAndDecodeAudio","ensureValidFileExtension","hash","arrayBuffer","releaseBuffer","newList","fileExtensionPriorityList","item","testElement","bestMaybe","strictFallbacks","Declicker","isFading","_fadingIn","fadeMaskTimeout","gainNode","fadeMaskDuration","fadeOut","linearRampToValueAtTime","currentTime","setTimeout","fadeIn","cancelFade","cancelScheduledValues","clearTimeout","_paused","_positionOffset","_remainingDelay","_startTime","Boolean","_sourceNode","_stopping","_pausing","fademaskerNode","declicker","handleFadeMaskComplete","remainingLoops","_createSourceNode","start","createBufferSource","onended","handleEnded","loop","playing","isFadingIn","_pauseCore","_stopCore","Effect","effectBus","dryGain","wetGain","_enabled","disable","enable","LowPassFilter","filterNode","Q","frequency","cutoffFrequency","createBiquadFilter","HighPassFilter","BiquadFilter","HIGHPASS","LOWPASS","BANDPASS","LOWSHELF","HIGHSHELF","PEAKING","NOTCH","ALLPASS","detune","FX"],"mappings":"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"}